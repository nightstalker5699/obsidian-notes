# PostgreSQL Database Restoration Guide

## Key Restoration Methods

### 1. Using psql for SQL Dumps
```bash
# Basic restore from SQL dump
psql -U username -d dbname -f backup_file.sql

# Create new database and restore
createdb -U username newdb
psql -U username -d newdb -f backup_file.sql
```

### 2. Using pg_restore for Custom Format Backups
```bash
# Restore entire database
pg_restore -U username -d dbname backup_file.custom

# Create new database and restore
createdb -U username newdb
pg_restore -U username -d newdb backup_file.custom
```

### 3. GUI Restoration (Valentina Studio Example)
As shown in the transcript, GUI tools provide visual restoration:
1. Right-click on server/database
2. Select "Restore from dump"
3. Choose backup file
4. Configure options (schema only/data only)
5. Execute restoration

## Common Restoration Scenarios

### Partial Restores
```bash
# Restore only schema (no data)
pg_restore -U username -d dbname --schema-only backup_file.custom

# Restore specific tables
pg_restore -U username -d dbname -t table1 -t table2 backup_file.custom

# Restore data only (no schema)
pg_restore -U username -d dbname --data-only backup_file.custom
```

### Handling Errors During Restoration
1. **Pre-check backup file**:
   ```bash
   pg_restore --list backup_file.custom
   ```

2. **Common issues**:
   - Missing database (create it first)
   - Permission errors (use superuser or correct privileges)
   - Version incompatibilities

## Best Practices

1. **Test restores regularly** - Validate your backups work
2. **Document restoration procedures** - Include:
   ```markdown
   - Database creation commands
   - Required user permissions
   - Special restoration parameters
   - Expected duration for full restore
   ```

3. **Performance considerations**:
   ```bash
   # Use parallel jobs for faster restoration
   pg_restore -U username -d dbname -j 4 backup_file.custom
   ```

4. **Alternative restoration workflow**:
   ```bash
   # 1. Create empty database
   createdb -U username -T template0 newdb
   
   # 2. Restore schema first
   pg_restore -U username -d newdb --schema-only backup_file.custom
   
   # 3. Restore data
   pg_restore -U username -d newdb --data-only backup_file.custom
   ```

## Important Lessons from the Transcript

1. **Backup method affects restoration**:
   - SQL dumps vs. custom formats
   - GUI-generated backups may need CLI restoration

2. **Restoration challenges**:
   - Syntax errors in generated scripts
   - Database creation conflicts
   - Tool-specific limitations

3. **Production recommendations**:
   - Prefer command-line tools for reliability
   - Test restoration procedures before emergency
   - Consider specialized tools like pgBackRest for large databases

For mission-critical systems, the transcript emphasizes that while GUI tools simplify backup creation, understanding the underlying commands ensures reliable restoration when needed.